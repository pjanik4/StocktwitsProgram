<html>
	<head>
		<title>StockTwits - by StockRender</title>

		<!-- Framework -->
			<script src="js/stockrender-apprender.1.0.0.min.js"></script>
		<!-- Framework -->
		<!-- Supplementary Code -->
		<!-- JS -->
			<script src="js/mainTwitterv2.js"></script>
		<!-- JS -->
		<!-- CSS -->
			<link rel="stylesheet" type="text/css" href="css/style.css">
		<!-- Bootstrap -->
			<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
			<script src="js/bootstrap.min.js"></script>
			<script src="js/jquery-2.1.3.min.js"></script> 
			<script src="js/jquery.autocomplete.min.js"></script>
		<script>
			function Marcin(){
				$('#news').empty();
				// Removes previous search

					var ticker = (document.getElementById("autocomplete").value); //Gets user input
					var ticker = ticker.toUpperCase(); //Changes user input to uppercase letters
					var http = "https://www.kimonolabs.com/api/ondemand/7r8yujfa?apikey=l6rQ95UcRiqvLPJOL6M8bIRPjaEjy46a&kimpath2=" + ticker;
					console.log(ticker) //Logs user input

				$.ajax({
				    "url":http,
				    "crossDomain":true,
				    "dataType":"jsonp",
				    //Make a call to the Kimono API following the "url" 
				    
				    'success': function(response){ 
				    // If the call request was successful and the data was retrieved, this function will create a list displaying the data
				        
				    // $(".panel-heading").html(response.name);
				    // //Puts the API name into the panel heading  
				        
				    var collection = response.results.collection1;
				    for (var i = 0; i < collection.length; i++){   
				    // Traverses through every element in the entire collection

				    //NAME TWEET PICTURE DATE
				        
				        $(".list-group").append('<li class="list-group-item">' + '<img src = \"' + collection[i].property3.src + '"\" style = "width:30px;height:30px">' + " " + '<a href=\"' + collection[i].property1.href + '\" target = "_blank">' + collection[i].property1.text + '</a>' + " " + collection[i].property4.text + '</li>');
				        // adds the text and the links from the first property into the list
				        
				        $(".list-group").append('<li class="list-group-item">' + collection[i].property2.text + '</li>');
				        // adds the text and the links from the first property into the list
				      }
				  }
				 
				})
			}

		</script>

		<form>			
			<style>
				.container{
    				padding: 5%
				}
			</style>

			<div class="container padding">
		  		<div class="panel panel-info">
		    		<div class="panel-heading"> 
		 

						<form>
							<input id="autocomplete" type="textbox" name="ticker" value = ""></input>
							<button type = "button" onclick = "Marcin()">Submit</button>
							<!-- <button type = "button" onclick = "history.go(0)">Refresh</button> -->
							&nbsp; *Note: Time and Date displayed in GMT
							&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
							&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
							Recent Tweets from 
							<a href="https://www.stocktwits.com" target = "_blank">Stocktwits</a> 
							&nbsp;
							<img src="files/stocktwits_logo.png" style="width:32px;height:32px">
						</form>
					</div>
		        	<ul class="list-group" id = "news"></ul>
		  		</div>
			</div>
		</form>
	</head>
</html>